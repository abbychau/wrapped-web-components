class t extends HTMLElement{constructor(){super(),!1!==this.constructor.useShadow&&this.attachShadow({mode:"open"}),this._props={},this._initialize()}_initialize(){this.constructor.styles&&this._applyStyles(),this.constructor.template&&this._applyTemplate(),"function"==typeof this.init&&this.init()}_applyStyles(){const t=this.constructor.styles;if(this.shadowRoot){const e=document.createElement("style");e.textContent=t,this.shadowRoot.appendChild(e)}else{const e=document.createElement("style"),r=`data-${this.tagName.toLowerCase()}-${Math.random().toString(36).substring(2,8)}`;this.setAttribute(r,"");const s=t.replace(/([^{]*){/g,((t,e)=>{if(e.trim().startsWith("@"))return t;return`${e.split(",").map((t=>`[${r}] ${t.trim()}`)).join(", ")} {`}));e.textContent=s,document.head.appendChild(e)}}_applyTemplate(){const t=this.constructor.template,e=this.shadowRoot||this;e.innerHTML="function"==typeof t?t.call(this):t,this._processEventBindings(e)}_processEventBindings(t){const e=t.querySelectorAll("*");Array.from(e).forEach((t=>{Array.from(t.attributes).filter((t=>t.name.startsWith("data-event-"))).forEach((e=>{const r=e.name.replace("data-event-",""),s=e.value;"function"==typeof this[s]?t.addEventListener(r,this[s].bind(this)):console.warn(`Handler "${s}" not found for event "${r}"`),t.removeAttribute(e.name)}))}))}connectedCallback(){"function"==typeof this.connected&&this.connected()}disconnectedCallback(){"function"==typeof this.disconnected&&this.disconnected()}attributeChangedCallback(t,e,r){if(e!==r){this[t.replace(/-([a-z])/g,((t,e)=>e.toUpperCase()))]=this._parseAttributeValue(r),"function"==typeof this.attributeChanged&&this.attributeChanged(t,e,r)}}_parseAttributeValue(t){if(null==t)return t;try{return JSON.parse(t)}catch(e){return t}}update(t={}){Object.entries(t).forEach((([t,e])=>{this[t]=e})),this.constructor.template&&this._applyTemplate()}}function e(t,...e){return t.reduce(((t,r,s)=>{const n=e[s]||"";let o;return o=null==n?"":"object"==typeof n&&n.isEventBinding?`data-event-${n.eventName}="${n.handlerName}"`:Array.isArray(n)?n.join(""):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),t+r+o}),"")}function r(t,...e){return t.reduce(((t,r,s)=>t+r+(e[s]||"")),"")}function s(e,r={}){class s extends t{}return s.template=r.template||"",s.styles=r.styles||"",s.useShadow=!1!==r.useShadow,s.observedAttributes=r.observedAttributes||[],r.methods&&Object.entries(r.methods).forEach((([t,e])=>{s.prototype[t]=e})),r.properties&&Object.entries(r.properties).forEach((([t,e])=>{if(Object.defineProperty(s.prototype,t,{get(){return void 0!==this._props[t]?this._props[t]:e.default},set(r){const s=this._props[t];if(this._props[t]=r,e.reflect){const e=t.replace(/([A-Z])/g,"-$1").toLowerCase();null==r?this.removeAttribute(e):"boolean"==typeof r?r?this.setAttribute(e,""):this.removeAttribute(e):this.setAttribute(e,r)}"function"==typeof this.propertyChanged&&s!==r&&this.propertyChanged(t,s,r)},configurable:!0,enumerable:!0}),e.reflect&&!s.observedAttributes.includes(t)){const e=t.replace(/([A-Z])/g,"-$1").toLowerCase();s.observedAttributes.push(e)}})),customElements.define(e,s),s}async function n(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`Failed to load component from ${t}: ${e.statusText}`);return o(await e.text())}catch(t){throw console.error(`Error loading component: ${t.message}`),t}}function o(t){const e=(new DOMParser).parseFromString(t,"text/html"),r=e.querySelector("template"),s=r?r.innerHTML.trim():"",n=e.querySelector("style"),o=n?n.textContent.trim():"",i=e.querySelector("script");let a={};if(i)try{const t=i.textContent.trim();a=new Function("exports",`\n        const module = { exports: {} };\n        const exportObj = {};\n        \n        // Define export default\n        function exportDefault(obj) {\n          Object.assign(exportObj, obj);\n        }\n        \n        // Execute the script\n        ${t}\n        \n        // Return the exported object\n        return exportObj;\n      `)()}catch(t){console.error(`Error parsing script: ${t.message}`)}const c=e.body.firstElementChild,p={};return c&&Array.from(c.attributes).forEach((t=>{if(t.name.startsWith("data-")){const e=t.name.replace("data-","").replace(/-([a-z])/g,((t,e)=>e.toUpperCase()));p[e]=t.value}})),{template:s,style:o,script:a,attributes:p}}e.event=function(t,e){return{isEventBinding:!0,eventName:t,handlerName:e}};const i=new Map;async function a(t,e){if("string"!=typeof e)return c(t,e);try{return c(t,await n(e))}catch(e){throw console.error(`Failed to register component ${t}: ${e.message}`),e}}function c(e,r){class s extends t{}return s.template=r.template||"",s.styles=r.style||"",s.useShadow=!1!==r.script?.useShadow,s.observedAttributes=r.script?.observedAttributes||[],r.script?.methods&&Object.entries(r.script.methods).forEach((([t,e])=>{s.prototype[t]=e})),["init","connected","disconnected","attributeChanged","propertyChanged"].forEach((t=>{"function"==typeof r.script?.[t]&&(s.prototype[t]=r.script[t])})),r.script?.properties&&Object.entries(r.script.properties).forEach((([t,e])=>{if(Object.defineProperty(s.prototype,t,{get(){return void 0!==this._props[t]?this._props[t]:e.default},set(r){const s=this._props[t];if(this._props[t]=r,e.reflect){const e=t.replace(/([A-Z])/g,"-$1").toLowerCase();null==r?this.removeAttribute(e):"boolean"==typeof r?r?this.setAttribute(e,""):this.removeAttribute(e):this.setAttribute(e,r)}"function"==typeof this.propertyChanged&&s!==r&&this.propertyChanged(t,s,r)},configurable:!0,enumerable:!0}),e.reflect&&!s.observedAttributes.includes(t)){const e=t.replace(/([A-Z])/g,"-$1").toLowerCase();s.observedAttributes.push(e)}})),customElements.define(e,s),i.set(e,s),s}function p(t){return i.get(t)}function u(t){return i.has(t)}export{t as Component,r as css,s as define,p as getComponent,u as hasComponent,e as html,n as loadComponent,o as parseComponent,a as register};
